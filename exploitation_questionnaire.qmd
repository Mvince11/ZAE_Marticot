---
title: ""
format:
  dashboard:
    orientation: rows
editor: visual
expandable: true
layout: "grid"
scrolling: true
---

```{r setup, include=FALSE}
# Chargement des packages
library(tidyverse)
library(readr)

# Lecture du fichier CSV
donnees <- read_csv("data/results-survey337264.csv", show_col_types = FALSE)%>%
  drop_na(`Date de soumission`)
```

## Row {height="40%"}

```{r}
#| echo: false
donnees %>%
  count(`Quel est votre genre ?  Veuillez cocher une case`) %>%
  ggplot(aes(x = reorder(`Quel est votre genre ?  Veuillez cocher une case`, n), y = n, fill = `Quel est votre genre ?  Veuillez cocher une case`)) +
  geom_col(show.legend = FALSE) +
  coord_flip() +
  labs(title = "Répartition des réponses par genre", x = "Genre", y = "Nombre de réponses") +
  theme(plot.title = element_text(color = "red", size = 14, face = "bold"))
```

```{r}
#| echo: false
donnees %>%
  count(`Quel est votre âge ?`) %>%
  ggplot(aes(x = `Quel est votre âge ?`, y = n, fill = `Quel est votre âge ?`)) +
  geom_col(show.legend = FALSE) +
  coord_flip() +
  labs(
    title = "Répartition des réponses par âge",
    x = "Âge",
    y = "Nombre de réponses"
  ) +
  theme(
    plot.title = element_text(color = "red", size = 14, face = "bold")
  )
```

## Row {height="60%"}

```{r}
#| echo: false
#| message: false
#| warning: false
donnees_age_genre <- donnees %>%
  rename(Genre = `Quel est votre genre ?  Veuillez cocher une case`) %>%
  count(`Quel est votre âge ?`, Genre)

# Étape 2 : faire le graphique
ggplot(donnees_age_genre, aes(x = `Quel est votre âge ?`, y = n, fill = Genre)) +
  geom_col(position = "dodge") +
  labs(
    title = "Répartition des réponses par âge et par genre",
    y = "Nombre de réponses",
    x = "Âge"
  ) +
  theme_minimal()
```

## Row {height="100%"}

<h1>Test</h1>
